{% trans_default_domain 'FOSUserBundle' %}

{% set roleHierarchy = app.request.get('roleHierarchy')?app.request.get('roleHierarchy'):'ROLE_APPLICANT' %}

<div ng-app="sample">
    <form class="form-horizontal" action="{{ path('fos_user_registration_register') }}" 
          {{ form_enctype(form) }} method="POST" name="registerForm" >
        <div class="form-group" id="fos_user_registration_form">
            <center>
                <div class="form-group">
                    <h2>Cr√©ation d'un compte</h2>
                    <p>Veuillez remplir les champs suivantes:</p>
                </div>
                <input type="hidden" name="role" value="{{ roleHierarchy }}" checked="checked">
            </center>
            <br/>
            <div class="form-group">
                <label class="col-md-3 control-label">
                    {{ form_label(form.email) }} *
                </label>
                <div class="col-md-4">
                    {{ form_widget(form.email, { 'attr': {'class': 'form-control'} }) }}<br/>
                </div>
                {{ form_errors(form.email) }}
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">
                    {{ form_label(form.username) }} *
                </label>
                <div class="col-md-4">
                    {{ form_widget(form.username, { 'attr': {'class': 'form-control'} }) }}
                </div>		        
                {{ form_errors(form.username) }}
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">
                    {{ form_label(form.plainPassword.first) }} *
                </label>
                <div class="col-md-4">
                    {{ form_widget(form.plainPassword.first, { 'attr': {'class': 'form-control'} }) }}
                </div>		        
                {{ form_errors(form.plainPassword.first) }}
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">
                    {{ form_label(form.plainPassword.second) }} *
                </label>

                <div class="col-md-4">
                    {{ form_widget(form.plainPassword.second, { 'attr': {'class': 'form-control'} }) }}
                </div>
                {{ form_errors(form.plainPassword.second) }}
            </div>
            {% if roleHierarchy == 'ROLE_RECRUITER' %}
                <div class="form-group">
                    <label class="col-md-3 control-label">
                        Siret / Siren 
                    </label>

                    <div class="col-md-4">
                        <input type="text" class="form-control">
                    </div>
                </div>
            {% endif %}
            {{ form_rest(form) }}
 (*) champs obligatoires 
        </div>
        <div class="form-group">
            <div class="col-md-offset-3 col-md-9">
                <input type="submit" class="btn btn-default" value="{{ 'registration.submit'|trans }}" />
            </div>
        </div>
    </form>
</div>
